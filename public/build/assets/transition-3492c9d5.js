import{r as l,R as E}from"./app-02160b21.js";import{u as $,o as _,f as W,p as X,s as L,l as Y,j as de,L as J,y as Z,w as R,a as ee,b as x,c as fe,e as ve,d as me,g as w,D as re,C as te}from"./use-is-mounted-1cad7a44.js";function pe(r=0){let[e,t]=l.useState(r),i=l.useCallback(s=>t(a=>a|s),[e]),d=l.useCallback(s=>!!(e&s),[e]),m=l.useCallback(s=>t(a=>a&~s),[t]),f=l.useCallback(s=>t(a=>a^s),[t]);return{flags:e,addFlag:i,hasFlag:d,removeFlag:m,toggleFlag:f}}function he(r){let e={called:!1};return(...t)=>{if(!e.called)return e.called=!0,r(...t)}}function z(r,...e){r&&e.length>0&&r.classList.add(...e)}function G(r,...e){r&&e.length>0&&r.classList.remove(...e)}function ge(r,e){let t=_();if(!r)return t.dispose;let{transitionDuration:i,transitionDelay:d}=getComputedStyle(r),[m,f]=[i,d].map(a=>{let[u=0]=a.split(",").filter(Boolean).map(c=>c.includes("ms")?parseFloat(c):parseFloat(c)*1e3).sort((c,g)=>g-c);return u}),s=m+f;if(s!==0){t.group(u=>{u.setTimeout(()=>{e(),u.dispose()},s),u.addEventListener(r,"transitionrun",c=>{c.target===c.currentTarget&&u.dispose()})});let a=t.addEventListener(r,"transitionend",u=>{u.target===u.currentTarget&&(e(),a())})}else e();return t.add(()=>e()),t.dispose}function be(r,e,t,i){let d=t?"enter":"leave",m=_(),f=i!==void 0?he(i):()=>{};d==="enter"&&(r.removeAttribute("hidden"),r.style.display="");let s=$(d,{enter:()=>e.enter,leave:()=>e.leave}),a=$(d,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),u=$(d,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return G(r,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),z(r,...s,...u),m.nextFrame(()=>{G(r,...u),z(r,...a),ge(r,()=>(G(r,...s),z(r,...e.entered),f()))}),m.dispose}function Ee({container:r,direction:e,classes:t,onStart:i,onStop:d}){let m=W(),f=X(),s=L(e);Y(()=>{let a=_();f.add(a.dispose);let u=r.current;if(u&&s.current!=="idle"&&m.current)return a.dispose(),i.current(s.current),a.add(be(u,t.current,s.current==="enter",()=>{a.dispose(),d.current(s.current)})),a.dispose},[e])}function S(r=""){return r.split(" ").filter(e=>e.trim().length>1)}let O=l.createContext(null);O.displayName="TransitionContext";var Te=(r=>(r.Visible="visible",r.Hidden="hidden",r))(Te||{});function Fe(){let r=l.useContext(O);if(r===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return r}function Ce(){let r=l.useContext(k);if(r===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return r}let k=l.createContext(null);k.displayName="NestingContext";function A(r){return"children"in r?A(r.children):r.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function ne(r,e){let t=L(r),i=l.useRef([]),d=W(),m=X(),f=x((v,n=R.Hidden)=>{let p=i.current.findIndex(({el:o})=>o===v);p!==-1&&($(n,{[R.Unmount](){i.current.splice(p,1)},[R.Hidden](){i.current[p].state="hidden"}}),m.microTask(()=>{var o;!A(i)&&d.current&&((o=t.current)==null||o.call(t))}))}),s=x(v=>{let n=i.current.find(({el:p})=>p===v);return n?n.state!=="visible"&&(n.state="visible"):i.current.push({el:v,state:"visible"}),()=>f(v,R.Unmount)}),a=l.useRef([]),u=l.useRef(Promise.resolve()),c=l.useRef({enter:[],leave:[],idle:[]}),g=x((v,n,p)=>{a.current.splice(0),e&&(e.chains.current[n]=e.chains.current[n].filter(([o])=>o!==v)),e==null||e.chains.current[n].push([v,new Promise(o=>{a.current.push(o)})]),e==null||e.chains.current[n].push([v,new Promise(o=>{Promise.all(c.current[n].map(([h,b])=>b)).then(()=>o())})]),n==="enter"?u.current=u.current.then(()=>e==null?void 0:e.wait.current).then(()=>p(n)):p(n)}),T=x((v,n,p)=>{Promise.all(c.current[n].splice(0).map(([o,h])=>h)).then(()=>{var o;(o=a.current.shift())==null||o()}).then(()=>p(n))});return l.useMemo(()=>({children:i,register:s,unregister:f,onStart:g,onStop:T,wait:u,chains:c}),[s,f,i,g,T,c,u])}function we(){}let $e=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Q(r){var e;let t={};for(let i of $e)t[i]=(e=r[i])!=null?e:we;return t}function Re(r){let e=l.useRef(Q(r));return l.useEffect(()=>{e.current=Q(r)},[r]),e}let Se="div",le=de.RenderStrategy;function xe(r,e){let{beforeEnter:t,afterEnter:i,beforeLeave:d,afterLeave:m,enter:f,enterFrom:s,enterTo:a,entered:u,leave:c,leaveFrom:g,leaveTo:T,...v}=r,n=l.useRef(null),p=Z(n,e),o=v.unmount?R.Unmount:R.Hidden,{show:h,appear:b,initial:ae}=Fe(),[F,B]=l.useState(h?"visible":"hidden"),K=Ce(),{register:P,unregister:N}=K,M=l.useRef(null);l.useEffect(()=>P(n),[P,n]),l.useEffect(()=>{if(o===R.Hidden&&n.current){if(h&&F!=="visible"){B("visible");return}return $(F,{hidden:()=>N(n),visible:()=>P(n)})}},[F,n,P,N,h,o]);let U=L({enter:S(f),enterFrom:S(s),enterTo:S(a),entered:S(u),leave:S(c),leaveFrom:S(g),leaveTo:S(T)}),D=Re({beforeEnter:t,afterEnter:i,beforeLeave:d,afterLeave:m}),j=ee();l.useEffect(()=>{if(j&&F==="visible"&&n.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[n,F,j]);let I=ae&&!b,se=(()=>!j||I||M.current===h?"idle":h?"enter":"leave")(),y=pe(0),ue=x(C=>$(C,{enter:()=>{y.addFlag(w.Opening),D.current.beforeEnter()},leave:()=>{y.addFlag(w.Closing),D.current.beforeLeave()},idle:()=>{}})),oe=x(C=>$(C,{enter:()=>{y.removeFlag(w.Opening),D.current.afterEnter()},leave:()=>{y.removeFlag(w.Closing),D.current.afterLeave()},idle:()=>{}})),H=ne(()=>{B("hidden"),N(n)},K);Ee({container:n,classes:U,direction:se,onStart:L(C=>{H.onStart(n,C,ue)}),onStop:L(C=>{H.onStop(n,C,oe),C==="leave"&&!A(H)&&(B("hidden"),N(n))})}),l.useEffect(()=>{I&&(o===R.Hidden?M.current=null:M.current=h)},[h,I,F]);let q=v,ce={ref:p};return b&&h&&fe.isServer&&(q={...q,className:ve(v.className,...U.current.enter,...U.current.enterFrom)}),E.createElement(k.Provider,{value:H},E.createElement(me,{value:$(F,{visible:w.Open,hidden:w.Closed})|y.flags},re({ourProps:ce,theirProps:q,defaultTag:Se,features:le,visible:F==="visible",name:"Transition.Child"})))}function ye(r,e){let{show:t,appear:i=!1,unmount:d,...m}=r,f=l.useRef(null),s=Z(f,e);ee();let a=te();if(t===void 0&&a!==null&&(t=(a&w.Open)===w.Open),![!0,!1].includes(t))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,c]=l.useState(t?"visible":"hidden"),g=ne(()=>{c("hidden")}),[T,v]=l.useState(!0),n=l.useRef([t]);Y(()=>{T!==!1&&n.current[n.current.length-1]!==t&&(n.current.push(t),v(!1))},[n,t]);let p=l.useMemo(()=>({show:t,appear:i,initial:T}),[t,i,T]);l.useEffect(()=>{if(t)c("visible");else if(!A(g))c("hidden");else{let h=f.current;if(!h)return;let b=h.getBoundingClientRect();b.x===0&&b.y===0&&b.width===0&&b.height===0&&c("hidden")}},[t,g]);let o={unmount:d};return E.createElement(k.Provider,{value:g},E.createElement(O.Provider,{value:p},re({ourProps:{...o,as:l.Fragment,children:E.createElement(ie,{ref:s,...o,...m})},theirProps:{},defaultTag:l.Fragment,features:le,visible:u==="visible",name:"Transition"})))}function Le(r,e){let t=l.useContext(O)!==null,i=te()!==null;return E.createElement(E.Fragment,null,!t&&i?E.createElement(V,{ref:e,...r}):E.createElement(ie,{ref:e,...r}))}let V=J(ye),ie=J(xe),Pe=J(Le),He=Object.assign(V,{Child:Pe,Root:V});export{He as t};
